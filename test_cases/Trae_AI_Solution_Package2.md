基于您提供的 JSON State，我为您量身定制了**“宠托邦·智能店长 (PetGuard AI)”**的完整交付方案。

考虑到用户（杰瑞）是**非技术背景**的中小企业主，且痛点集中在**流程繁琐**和**应急响应**上，本方案采用 **Coze (扣子) + 飞书多维表格 (Lark Base)** 的低代码组合。这既能利用微信作为极简前端，又能利用飞书强大的数据管理能力，实现“零代码”交付。

以下是四个独立的交付文档。

---

# DOC_01_PRD.md

## 1. 产品定义 (Product Definition)
*   **产品名称**：宠托邦·智能店长 (PetGuard AI)
*   **核心价值主张**：一款“长在微信里”的 AI 门店管家。它能听懂你的语音指令，看懂你的宠物照片，自动处理繁琐的预约记录与日报撰写，让你在紧急时刻只需动口不动手，将精力回归到照顾宠物本身。

## 2. 用户故事 (User Stories)

| 场景 | 用户 (As a...) | 行为 (I want to...) | 价值/结果 (So that...) |
| :--- | :--- | :--- | :--- |
| **预约录入** | 忙碌的店主 | 转发客户杂乱的微信预约文字给 AI | AI 自动提取时间、品种、服务，录入飞书表格，防止漏单。 |
| **每日汇报** | 疲惫的摄影师 | 随手拍一张宠物的照片发给 AI | AI 结合画面生成高情商、温馨的“今日日报”文案，我确认后一键转发给客户。 |
| **紧急响应** | 正在洗狗的护理员 | 按住语音大喊“紧急情况，豆豆呕吐了” | AI 立即识别危机，自动给主人发送预警消息，并弹窗通知前台准备急救箱。 |
| **数据管理** | 缺乏数据思维的老板 | 查看本周服务概览 | AI 自动整理飞书看板，告诉我哪个服务最赚钱，哪类狗狗最近最多。 |

## 3. 功能清单 (Feature List)

### P0: 核心闭环 (Must-have)
1.  **非结构化信息清洗**：识别微信聊天中的自然语言（如：“明天下午三点带金毛来洗澡”），转化为结构化 JSON 并写入飞书多维表格。
2.  **视觉日志生成 (Vision-to-Text)**：接收图片，识别宠物状态/表情，调用 LLM 生成 3 种不同风格（温馨、幽默、专业）的日报文案。
3.  **语音急救模式**：集成 ASR（语音转文字），当识别到“紧急”、“受伤”、“咬人”等关键词时，触发高优先级通知流。

### P1: 体验优化 (Nice-to-have)
1.  **主动日程提醒**：每天早上 8:00，AI 在微信推送“今日待办事项”卡片。
2.  **老客知识库**：当提到某只狗的名字时，AI 自动调取其过往病史或喜好（从飞书读取）。

## 4. 验收标准 (Success Metrics)
1.  **录入效率**：从收到预约到录入表格的时间由 3 分钟缩短至 10 秒。
2.  **情绪价值**：生成的日报文案采纳率 > 80%（即用户只需微调或直接发送）。
3.  **零遗漏**：紧急语音指令的识别准确率需达到 95% 以上。

---

# DOC_02_Tech_Architecture.md

## 1. 技术架构图 (Architecture Diagram)

```mermaid
graph TD
    User[用户 (杰瑞)] -->|微信文本/语音/图片| WeChat[微信客户端]
    WeChat -->|消息转发| CozeBot[Coze 智能体 (逻辑中枢)]
    
    subgraph Coze Workflow [Coze 工作流编排]
        Router{意图识别路由}
        Router -->|预约/记账| Parser[文本结构化 Agent]
        Router -->|发照片| Vision[GPT-4o 视觉理解 Agent]
        Router -->|喊救命| Emergency[ASR + 紧急逻辑 Agent]
    end
    
    CozeBot --> Router
    
    Parser -->|写入数据| LarkAPI[飞书多维表格 API]
    Vision -->|读取画像/写入日志| LarkAPI
    Emergency -->|触发飞书机器人| LarkBot[飞书群组/急加急]
    
    subgraph Lark Base [飞书多维表格 (数据层)]
        Table1[(预约管理表)]
        Table2[(宠物档案表)]
        Table3[(每日日志表)]
    end
    
    LarkAPI --> Table1 & Table2 & Table3
    Table1 -->|自动化触发| DailyPush[飞书自动化: 每日提醒]
    DailyPush -->|Webhook| CozeBot
    CozeBot -->|推送消息| User
```

## 2. 技术栈选型 (Tech Stack)

*   **前端交互层**：**微信 (WeChat)**
    *   *理由*：用户最高频使用的软件，无需安装新 App，符合“All-in-one”诉求。
    *   *实现*：通过 Coze 的“发布到微信”功能（服务号或个人号托管）。
*   **逻辑编排层**：**Coze (扣子)**
    *   *理由*：低代码，内置 GPT-4o (处理视觉和复杂文本能力极强)，且原生支持飞书插件。
    *   *核心插件*：`Lark Base` (读写表格), `OCR/Vision` (图片理解).
*   **数据存储层**：**飞书多维表格 (Lark Base)**
    *   *理由*：用户已有基础，界面友好，支持移动端查看，且具备自动化流程（Automation）。
*   **模型层**：**GPT-4o / Doubao-Vision**
    *   *理由*：需要极强的多模态能力来理解宠物照片和语音转写的上下文。

## 3. 关键难点与攻克 (Key Challenges)

1.  **微信风控限制**：
    *   *风险*：频繁自动回复可能导致封号或消息被拦截。
    *   *对策*：设置 Coze 的回复延迟（模拟真人思考）；在“紧急模式”下，建议结合飞书 App 的强提醒（加急），而不仅仅依赖微信。
2.  **语音识别准确率**：
    *   *风险*：宠物店环境嘈杂（狗叫声、吹水机声），ASR 可能失灵。
    *   *对策*：在 Coze 中配置 Prompt 容错，只要识别到高危关键词（如“咬”、“血”、“倒”），宁可误报不可漏报，并要求用户二次确认（“收到紧急指令，是否确认？”）。
3.  **非结构化数据清洗**：
    *   *风险*：客户说话逻辑混乱。
    *   *对策*：在 Coze Prompt 中预设 Few-Shot（少样本学习），给模型展示 5 个“烂输入 -> 好输出”的例子，强制模型输出标准 JSON 格式。

---

# DOC_03_UX_Concept.md

## 1. 界面形态 (Interface Metaphor)
**“隐形秘书”**：用户不需要面对复杂的后台，只需面对一个微信聊天窗口。所有的复杂逻辑都在后台完成，前台只有自然的对话。

## 2. 交互流程 (User Flow)

### 场景 A：极速预约 (Text to Data)
1.  **用户**：转发客户语音转文字或截图：“老板，这周六下午两点给咪咪洗个澡，顺便剪指甲。”
2.  **Agent**：(思考中...) -> 调用飞书查询周六下午时段。
3.  **Agent**：回复卡片：
    > ✅ **预约已识别**
    > 🐶 **宠物**：咪咪
    > 📅 **时间**：本周六 14:00
    > ✂️ **项目**：洗澡 + 剪指甲
    > ⚠️ **冲突检测**：该时段已有 2 只狗，建议调整至 15:00？
4.  **用户**：回复“那就 15:00”。
5.  **Agent**：“已锁定 15:00，飞书日历已更新。”

### 场景 B：看图写日报 (Image to Content)
1.  **用户**：发送一张金毛洗完澡吹毛的照片（毛发蓬松，舌头吐出）。
2.  **Agent**：识别图片内容 -> 读取“金毛”的性格档案（活泼/贪吃）。
3.  **Agent**：回复三段备选文案：
    > 1. **【专业版】** 今日洗护完成，毛发蓬松度满分，皮肤状况良好。
    > 2. **【卖萌版】** 呼~ 吹完毛感觉自己轻了二斤！今天的吹风机是本汪最好的朋友~
    > 3. **【简短版】** 洗香香啦，等你来接哦！
4.  **用户**：回复“2”。
5.  **Agent**：“文案已复制到剪贴板，可直接发送给客户。”

### 场景 C：紧急呼叫 (Voice Command)
1.  **用户**：(按住语音) “紧急情况！笼子门坏了，大狗跑出来了，快叫人！”
2.  **Agent**：(识别关键词：紧急、跑出来)
3.  **Agent**：
    *   **动作 1**：立即在“全员飞书群”发送 **[红色加急消息]**。
    *   **动作 2**：回复微信：“🚨 已通知全员！请注意安全！”

## 3. 可视化建议 (Visualization)
虽然交互在微信，但**数据查看**建议在飞书多维表格的**仪表盘 (Dashboard)** 视图：
*   **日历视图**：展示每日预约拥挤度（热力图颜色深浅）。
*   **画册视图**：展示每日拍摄的宠物照片流，方便快速找图。

---

# DOC_04_Data_Schema.md

为了解决用户“缺乏数据思维”的痛点，我们需要预先定义好标准的数据结构。这将直接部署在飞书多维表格中。

## 1. 核心实体定义 (Entity Definition)

*   **Customer (客户)**：宠物的主人，支付方。
*   **Pet (宠物)**：服务的实际对象，关联到客户。
*   **Appointment (预约)**：核心业务流，记录时间与服务。
*   **DailyLog (服务日志)**：用于生成日报的素材库。

## 2. 数据结构 (Schema Design)

### 表 1: 宠物档案表 (Pets_Profile)
*用于存储宠物画像，辅助 AI 生成个性化文案。*

| 字段名 (Field) | 类型 (Type) | 描述 (Description) |
| :--- | :--- | :--- |
| `Pet_ID` | AutoNumber | 唯一标识符 |
| `Name` | Text | 宠物昵称 |
| `Breed` | Single Select | 品种 (如：金毛、布偶) |
| `Owner_WeChat` | Text | 主人微信备注名 (用于关联) |
| `Personality` | Multi Select | 性格标签 (如：胆小、贪吃、粘人) - **AI 生成文案的关键** |
| `Health_Notes` | Text | 健康备注 (如：后腿有旧伤) |

### 表 2: 预约流水表 (Appointments)
*用于管理排期和收入。*

| 字段名 (Field) | 类型 (Type) | 描述 (Description) |
| :--- | :--- | :--- |
| `Appt_ID` | AutoNumber | 唯一标识符 |
| `Pet_Link` | Link | 关联 `Pets_Profile` |
| `Service_Time` | Date | 预约时间 |
| `Service_Type` | Single Select | 服务类型 (洗护/寄养/摄影) |
| `Status` | Single Select | 状态 (待确认/已完成/已取消) |
| `Revenue` | Currency | 预估金额 |

### 表 3: 每日服务日志 (Daily_Logs)
*用于 AI 读图后的数据沉淀。*

| 字段名 (Field) | 类型 (Type) | 描述 (Description) |
| :--- | :--- | :--- |
| `Log_ID` | AutoNumber | 唯一标识符 |
| `Date` | CreatedTime | 记录时间 |
| `Photo_Asset` | Attachment | 宠物照片 (由 Coze 上传) |
| `AI_Generated_Copy` | Long Text | AI 生成的日报文案 |
| `Feedback_Sentiment` | Number | 客户反馈评分 (1-5) |

## 3. 数据流转 (Data Flow)

1.  **Ingest (采集)**: 微信 (User) -> Coze (Text/Image/Voice)
2.  **Process (处理)**: Coze LLM (提取 JSON 实体)
3.  **Storage (存储)**: 飞书多维表格 API (根据 Schema 写入对应表)
4.  **Action (反馈)**: 飞书 Automation (监控状态变更) -> Coze -> 微信通知

## 4. 隐私与合规 (Privacy & Compliance)
*   **脱敏处理**：在飞书表格中，尽量不要直接存储客户的**手机号**或**家庭住址**明文。建议使用微信昵称作为主键，或仅存储手机号后四位。
*   **数据备份**：利用飞书的历史版本功能，防止误操作删除数据。